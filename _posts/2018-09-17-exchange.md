---
layout: post
title:  "交易所项目介绍"
date:   2018-09-17 17:15:54 +0800
categories: JavaScript
tags: JavaScript Array 算法 慕课网
---

* content
{:toc}
# 交易所项目介绍

那么现在我们开始学习做交易所项目

## 一、交易所分析

### 1.1 交易所现状

中国政府在2017年对数字货币作出了很多监管政策，因为严重破坏了市场的稳定性，支持区块链技术，但是目前明确禁止交易所非法集资，明确禁止数字货币的发行与交易，但是国外对数字货币很谨慎，没有明确禁止和支持，但允许发展。因此很多空气币都下架了，因内发展好的交易所也搬移到了国外发展，如火币网、OKCoin等。



### 1.2 交易所分类

交易所从交易流程可分为以下三种类型：

- 去中心化交易所：在交易所本身的资料库中增减使用者资产栏位。
- 去中心化交易所：在区块链上直接交换，数字货币会直接发回使用者的钱包，或者是保存在区块链上的智能合约。
- 半去中心化交易所：数字货币统一发至交易所指定钱包进行撮合交易，交易用的钱包实际控制人属于交易所。

交易所只是交易的工具，一般投资者并不十分关心交易所是否中心化、去中心化，中心化交易所的特点就是效率高处理速度快，所以大量中心化交易所产生了，也有部分交易量低的去中心化交易所。

### 1.3 交易类型

**C2C交易**

Customer/Consumer to Customer/Consumer,简单理解就是消费者对消费者的交易。

**USDT交易**

USDT是Tether公司推出的美元的代币，即1USDT=1美元，价格浮动可由交易所自身控制。

**币币交易**

数字资产与数字资产之间的交易。

### 1.4 思考题？

1. 在火币、gate.io等中心化交易所交易，挂单买卖时是否连接到了区块链上进行了转帐操作？
2. 在个人中心，进行提现、充值业务时是否连接到了区块链上进行了转帐操作？
3. 交易所上的帐户是否拥有钱包帐户？是否拥有自己可以操作的钱包帐户？
4. 若拥有钱包帐户，为何挂单买卖交易时无需输入钱包密钥？
5. 若拥有自己可以操作的钱包帐户，为何提现、充值时无需输入钱包密钥？
6. 提现操作时的转出帐户是哪个？
7. 提现操作时的转入帐户是哪个？
8. 往钱包地址充值时，运行在区块链上进行的交易，那么交易所中心是如何知道的？并且将相应金额添加到了交易所的你的帐户余额上？

如果你不能回答或是不能确定上面的问题，请继续后面课程，我们会逐一解答各个问题，并给出解决方案。

## 二、业务功能

接下来我们做一个中心化交易所，它会拥有这些功能：用户系统、挂单、币转币、提现、充值、交易查询等。

看一个流程图

![mark](http://p9ug71a1p.bkt.clouddn.com/blog/180825/j5g6A6194i.png?imageslim)

### 2.1 用户系统

由于是中心化交易所，因此用户数据得存在自己的服务器中，这里使用mysql数据库存储数据，用户注册登录后，我们使用token验证用户的身份。

### 2.2 币转币

因为现在越来越多的代币在运作，并且上线了各大交易所，所以在交易的时候不止可以转以太币，还能转代币，并且支持币转币，在币转币的过程中就需要锁单、挂单、拆单、交易生成订单等过程。

可见该交易过程非常繁琐、各大交易所为了用户体验即时交易、也是为了获取更多利益，将该交易演变成了不在链上交易，那么是如何交易的呢?通常都是在中央服务器拥有用户的帐户系统，自己的token数据都是存在了中央服务器的数据库中，因此币转币的交易与其它交易如电商购物交易等，都是修改的数据库数据。因此可见大家在交易时所花费的交易费都由交易所获取。

### 2.3 提现

由于在交易所中的买卖交易没有在链上进行交易，也就是你所买的token,并不实际属于你，因此可以通过提现，将自己在交易所帐户上拥有的token提到自己的钱包地址，这样就算交易所倒闭，自家的资金也是在钱包里的，可以通过其他交易所或者钱包进行提现或转帐。

### 2.4 充值

有了提现功能、自然就会有充值功能，自己钱包地址的余额不能直接在交易所平台转帐、买卖操作，因此通过充值功能将钱包地址的余额充到交易所平台的帐户余额中，即可进行买卖交易了。

## 三、架构设计

后台使用Koa框架搭建，和前面学习的钱包一样，采用MVC架构。采用的数据库为mysql

接下来我们先创建数据库表。

